# Cluster Control Over SQL
Other distributed SQL databases will typically have some kind of CLI or API
to interact with the lower level functionality of the cluster. Noah aims to
expose as much functionality over a common SQL interface as possible. 

# Table Definitions

>## `noah.nodes`
> | Columns    | Data Type | Description                                                                              | Editable | Autogenerated |
> |------------|-----------|------------------------------------------------------------------------------------------|----------|---------------|
> | node_id    | bigint    | noah's internal unique identifier for a node.                                            | No       | Yes           |
> | address    | text      | IP address that the node can be reached at by any coordinator.                           | Yes      | No            |
> | port       | int       | Port that postgres is listening to on the data node.                                     | Yes      | No            |
> | user       | text      | Postgres user that noah will use to connect to the node, `postgres` is recommended.      | Yes      | No            |
> | replica_of | bigint    | If this node is a direct replica of another node, then this Id will reference that.      | No       | No            |
> | region     | text      | Data-center region of this data node. More support for this will be added in the future. | Yes      | No            |
> | zone       | text      | Data-center zone.                                                                        | Yes      | No            |
> | is_alive   | bool      | Indicates whether the node can currently be connected to.                                | No       | Yes           |
> 
> This table contains all of the information about the data nodes in the cluster.
> The table will accept inserts, updates and deletes, but cannot be altered or dropped.
> 
> ### Examples
> > #### Add a new node to the cluster.
> > `INSERT INTO noah.nodes (address, port, user) VALUES('127.0.0.01', 5432, 'postgres');`
>
> > #### Update a node's region.
> > `UPDATE noah.nodes SET region = 'us-east-1' WHERE node_id = 43;`
>
> > #### Delete/decommission a node.
> > `DELETE FROM noah.nodes WHERE node_id = 43;`
>
> > #### Check the health of a single node.
> > `SELECT is_alive FROM noah.nodes WHERE node_id = 43;`
>
> > #### Get the percentage of live nodes in the cluster.
> > ```postgresql
> > SELECT ROUND( 100.0 * (
> >       SUM(CASE WHEN is_alive = true THEN 1 ELSE 0 END) / COUNT(is_alive)
> >   ), 1) AS percent_alive
> > FROM noah.nodes;
> > ```
